DROP TABLE CAREER;
DROP TABLE USERS;
DROP TABLE SERVICE;
DROP TABLE SOCIETY;
DROP TABLE CITY;
DROP TABLE REGION;
DROP TABLE COUNTRY;
DROP TABLE INSTITUTION;
DROP TABLE UTYPE;
DROP TABLE PROFESSION;

CREATE TABLE UTYPE (
	ROLE_ID SERIAL PRIMARY KEY,
	ROLE_NAME VARCHAR(255) NOT NULL
);

CREATE TABLE INSTITUTION (
	INST_ID SERIAL PRIMARY KEY,
	INST_NAME VARCHAR(255) NOT NULL
);

CREATE TABLE PROFESSION (
	PRFN_ID SERIAL PRIMARY KEY,
	PRFN_DESC VARCHAR(255) NOT NULL
);

CREATE TABLE COUNTRY (
	CTRY_ID SERIAL PRIMARY KEY,
	CTRY_NAME VARCHAR(255) NOT NULL
);

CREATE TABLE REGION (
	REGN_ID NUMERIC(3) PRIMARY KEY,
	CTRY_ID INTEGER REFERENCES COUNTRY(CTRY_ID),
	REGN_NAME VARCHAR(255) NOT NULL
);

CREATE TABLE CITY (
	CITY_ID SERIAL PRIMARY KEY,
	REGN_ID INTEGER REFERENCES REGION(REGN_ID),
	CITY_NAME VARCHAR(255) NOT NULL
);

CREATE TABLE SOCIETY(
	SCTY_ID SERIAL PRIMARY KEY,
	SCTY_RUT VARCHAR(12) NOT NULL,
	SCTY_NAME VARCHAR(255) NOT NULL
);

CREATE TABLE SERVICE(
	SCTY_ID INTEGER REFERENCES SOCIETY(SCTY_ID),
	CITY_ID INTEGER REFERENCES CITY(CITY_ID),
	ANNOUNCE VARCHAR(2000) NOT NULL
);

CREATE TABLE USERS(
	USER_ID SERIAL PRIMARY KEY,
	CITY_ID INTEGER REFERENCES CITY(CITY_ID),
	SCTY_ID INTEGER REFERENCES SOCIETY(SCTY_ID),
	ROLE_ID INTEGER REFERENCES UTYPE(ROLE_ID),
	USER_RUT VARCHAR(12) NOT NULL,
	FRST_NAME VARCHAR(50) NOT NULL,
	MIDD_NAME VARCHAR(50) ,
	FSCN_NAME VARCHAR(50) NOT NULL,
	SSCN_NAME VARCHAR(50)
);

CREATE TABLE CAREER(
	USER_ID INTEGER REFERENCES USERS(USER_ID),
	INST_ID INTEGER REFERENCES INSTITUTION(INST_ID),
	PRFN_ID INTEGER REFERENCES PROFESSION(PRFN_ID)
);

INSERT INTO PROFESSION(PRFN_DESC) VALUES ('Electrician');
INSERT INTO PROFESSION(PRFN_DESC) VALUES ('Plumber');
INSERT INTO PROFESSION(PRFN_DESC) VALUES ('Lawyer');

INSERT INTO UTYPE (ROLE_NAME) VALUES ('Admin');
INSERT INTO UTYPE (ROLE_NAME) VALUES ('Professional');
INSERT INTO UTYPE (ROLE_NAME) VALUES ('Customer');

INSERT INTO INSTITUTION (INST_NAME) VALUES ('NONE');
INSERT INTO INSTITUTION (INST_NAME) VALUES ('University of Chile');
INSERT INTO INSTITUTION (INST_NAME) VALUES ('Pontifical Catholic University of Chile');
INSERT INTO INSTITUTION (INST_NAME) VALUES ('University of Santiago');

INSERT INTO COUNTRY (CTRY_NAME) VALUES ('Chile');
INSERT INTO COUNTRY (CTRY_NAME) VALUES ('Argentina');
INSERT INTO COUNTRY (CTRY_NAME) VALUES ('Brazil');

INSERT INTO REGION (REGN_ID, CTRY_ID, REGN_NAME) VALUES (0, 1, 'Santiago');
INSERT INTO REGION (REGN_ID, CTRY_ID, REGN_NAME) VALUES (5, 1, 'Valparaíso');
INSERT INTO REGION (REGN_ID, CTRY_ID, REGN_NAME) VALUES (6, 1, 'Rancagua');

INSERT INTO CITY (REGN_ID,CITY_NAME) VALUES (0,'Buin');
INSERT INTO CITY (REGN_ID,CITY_NAME) VALUES (5,'Algarrobo');
INSERT INTO CITY (REGN_ID,CITY_NAME) VALUES (6,'San Bicente');

INSERT INTO SOCIETY (SCTY_RUT, SCTY_NAME) VALUES ('12345678-9', 'Don Rigo');
INSERT INTO SOCIETY (SCTY_RUT, SCTY_NAME) VALUES ('98765432-1', 'Plumbers Ltd.');
INSERT INTO SOCIETY (SCTY_RUT, SCTY_NAME) VALUES ('13579246-8', 'Lawyers Group');

INSERT INTO SERVICE (SCTY_ID, CITY_ID, ANNOUNCE) VALUES (1, 1, 'Don Rigos Professional electrical services available 24/7.');
INSERT INTO SERVICE (SCTY_ID, CITY_ID, ANNOUNCE) VALUES (2, 2, 'Plumbing services for all types of needs.');
INSERT INTO SERVICE (SCTY_ID, CITY_ID, ANNOUNCE) VALUES (3, 3, 'Legal consultation and representation.');

INSERT INTO USERS (CITY_ID, SCTY_ID, ROLE_ID, USER_RUT, FRST_NAME, MIDD_NAME, FSCN_NAME, SSCN_NAME) 
VALUES (1, 1, 2, '12345678-9', 'Rodrigo', 'Carlos', 'Pérez', 'González');
INSERT INTO USERS (CITY_ID, SCTY_ID, ROLE_ID, USER_RUT, FRST_NAME, FSCN_NAME, SSCN_NAME) 
VALUES (2, 2, 2, '22222222-2', 'María', 'Rodríguez', 'Lopez');
INSERT INTO USERS (CITY_ID, SCTY_ID, ROLE_ID, USER_RUT, FRST_NAME, MIDD_NAME, FSCN_NAME) 
VALUES (3, 3, 2, '33333333-3', 'Pedro', 'Antonio', 'Martínez');

INSERT INTO CAREER(USER_ID, INST_ID, PRFN_ID) VALUES (1,1,1);
INSERT INTO CAREER(USER_ID, INST_ID, PRFN_ID) VALUES (2,2,2);
INSERT INTO CAREER(USER_ID, INST_ID, PRFN_ID) VALUES (3,3,3);
//

SELECT * FROM CAREER;
SELECT * FROM USERS;
SELECT * FROM SERVICE;
SELECT * FROM SOCIETY;
SELECT * FROM CITY;
SELECT * FROM REGION;
SELECT * FROM COUNTRY;
SELECT * FROM INSTITUTION;
SELECT * FROM UTYPE;
SELECT * FROM PROFESSION;